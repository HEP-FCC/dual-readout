---
options:
  getSyntax: True
  exposePODMembers: False
  includeSubfolder: True

components:
  # Vector3D with floats
  edm4hep::Vector3f : # FIXME already lives in edm4hep, error handling in podio should be improved
    Members:
      - float x
      - float y
      - float z
    ExtraCode :
      declaration: "
      Vector3f() : x(0),y(0),z(0) {}\n
      Vector3f(float xx, float yy, float zz) : x(xx),y(yy),z(zz) {}\n
      Vector3f(const float* v) : x(v[0]),y(v[1]),z(v[2]) {}\n
      bool operator==(const Vector3f& v) const { return (x==v.x&&y==v.y&&z==v.z) ; }\n
      float operator[](unsigned i) const { return *( &x + i ) ; }\n
      "

  #------ ObjectID helper struct for references/relations
  edm4hep::ObjectID:
    Members:
      - int index
      - int collectionID
    ExtraCode :
      includes: "#include <podio/ObjectID.h>\n"
      declaration: "
      ObjectID() = default;\n
      ObjectID(const podio::ObjectID& id ): index(id.index), collectionID(id.collectionID) {}\n
    "

datatypes :
  edm4hep::SparseVector:
    Description: "User class to store sparse vector"
    Author : "Sanghyun Ko"
    Members:
      - float sampling // size of a bin
      - edm4hep::ObjectID assocObj // associated object ID
    VectorMembers:
      - float centers  // center value of the bin
      - float contents // content of the vector within [ center-sampling/2., center+sampling/2. )
    ExtraCode:
      includes:
        "#include <edm4hep/ObjectID.h>"
