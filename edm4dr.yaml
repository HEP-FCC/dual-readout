---
options:
  getSyntax: True
  exposePODMembers: False
  includeSubfolder: True

components:
  # Vector3D with floats
  edm4hep::Vector3f : # FIXME already lives in edm4hep, error handling in podio should be improved
    Members:
      - float x
      - float y
      - float z
    ExtraCode :
      declaration: "
      Vector3f() : x(0),y(0),z(0) {}\n
      Vector3f(float xx, float yy, float zz) : x(xx),y(yy),z(zz) {}\n
      Vector3f(const float* v) : x(v[0]),y(v[1]),z(v[2]) {}\n
      bool operator==(const Vector3f& v) const { return (x==v.x&&y==v.y&&z==v.z) ; }\n
      float operator[](unsigned i) const { return *( &x + i ) ; }\n
      "

datatypes :
  #------------- SimCalorimeterHit
  edm4hep::DRSimCalorimeterHit:
    Description: "Simulated DR calorimeter hit"
    Author : "Sanghyun Ko"
    VectorMembers:
      - int timeStruct // time structure of detected photons
      - float timeBegin // low edge of a time bin
      - float timeEnd // high edge of a time bin
      - int wavlenSpectrum // wavelength spectrum of detected photons
      - float wavlenBegin // low edge of a wavelength bin
      - float wavlenEnd // high edge of a wavelength bin

    OneToOneRelations:
      - edm4hep::RawCalorimeterHit edm4hepHit // link to edm4hep::RawCalorimeterHit
    ExtraCode:
      includes:
        "#include <edm4hep/RawCalorimeterHit.h>\n #include <edm4hep/RawCalorimeterHitCollection.h>"

  edm4hep::DRrecoCalorimeterHit:
    Description: "Reconstructed DR calorimeter hit"
    Author : "Sanghyun Ko"
    Members:
      - int validTimeStruct // validness of stored time structure (position)
    VectorMembers:
      - float timeStruct // time structure of reconstructed energy
      - edm4hep::Vector3f position // position corresponds to timeStruct

    OneToOneRelations:
      - edm4hep::CalorimeterHit edm4hepHit // link to edm4hep::CalorimeterHit
    ExtraCode:
      includes:
        "#include <edm4hep/CalorimeterHit.h>\n #include <edm4hep/CalorimeterHitCollection.h>"

  edm4hep::DRrecoCaloAssociation:
    Description: "Association between a CaloHit and the corresponding raw CaloHit"
    Author: "Sanghyun Ko"
    Members: {}
    OneToOneRelations:
      - edm4hep::DRrecoCalorimeterHit rec // reference to the reconstructed hit
      - edm4hep::DRSimCalorimeterHit sim // reference to the simulated hit
